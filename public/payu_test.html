
<!DOCTYPE html>
<html>
<head>
  <title>PayU Test Payment</title>
</head>
<body>
  <h2>PayU Test Payment</h2>

  <form id="paymentForm" action="https://test.payu.in/_payment" method="post">
    <input type="hidden" name="key" id="key" />
    <input type="hidden" name="txnid" id="txnid" />
    <input type="hidden" name="amount" id="amount" />
    <input type="hidden" name="productinfo" id="productinfo" />
    <input type="hidden" name="firstname" id="firstname" />
    <input type="hidden" name="email" id="email" />
    <input type="hidden" name="phone" id="phone" />
    <input type="hidden" name="surl" value="https://jaspreetsinghjewelry.com/order-success" />
    <input type="hidden" name="furl" value="https://jaspreetsinghjewelry.com/payment-failure" />
    <input type="hidden" name="hash" id="hash" />

    <input type="submit" value="Pay Now" id="submitBtn" disabled />
  </form>

  <script>
    // Get the current domain dynamically
    const currentDomain = window.location.origin;
    
    fetch(`${currentDomain}/payu_hash.php`)
      .then(response => response.json())
      .then(data => {
        document.getElementById('key').value = data.key;
        document.getElementById('txnid').value = data.txnid;
        document.getElementById('amount').value = data.amount;
        document.getElementById('productinfo').value = data.productinfo;
        document.getElementById('firstname').value = data.firstname;
        document.getElementById('email').value = data.email;
        document.getElementById('phone').value = data.phone;
        document.getElementById('hash').value = data.hash;

        // ✅ Enable the submit button once data is populated
        document.getElementById('submitBtn').disabled = false;
      })
      .catch(error => console.error("❌ Error fetching hash:", error));
  </script>
</body>
</html>
